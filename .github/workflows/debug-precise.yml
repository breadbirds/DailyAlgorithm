name: Precise Debug
on:
  workflow_dispatch:
permissions:
  contents: read
jobs:
  debug:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3
      - name: Precise Debug
        run: |
          echo "ğŸ” ì •ë°€ ë””ë²„ê¹… ì‹œì‘"
          echo "================================"
          
          # 1. ìœ ì§„ë‹˜ì˜ ëª¨ë“  ì»¤ë°‹ í™•ì¸
          echo "1. ìœ ì§„ë‹˜ì˜ 06-09 ëª¨ë“  ì»¤ë°‹:"
          all_commits=$(curl -s "https://api.github.com/repos/breadbirds/DailyAlgorithm/commits?author=breadbirds&since=2025-06-08T15:00:00Z&until=2025-06-09T14:59:59Z")
          echo "$all_commits" | jq '.[0:3] | .[] | {message: .commit.message, date: .commit.committer.date, files: [.url]}'
          echo ""
          
          # 2. ê° ì»¤ë°‹ì˜ íŒŒì¼ ëª©ë¡ í™•ì¸
          echo "2. ê° ì»¤ë°‹ì—ì„œ ìˆ˜ì •ëœ íŒŒì¼ë“¤:"
          for commit_sha in $(echo "$all_commits" | jq -r '.[0:3][] | .sha'); do
            echo "  ì»¤ë°‹ $commit_sha:"
            curl -s "https://api.github.com/repos/breadbirds/DailyAlgorithm/commits/$commit_sha" | \
              jq -r '.files[]? | .filename' | sed 's/^/    â€¢ /'
            echo ""
          done
          
          # 3. yujin í´ë” ì§ì ‘ í™•ì¸
          echo "3. yujin í´ë” ì»¤ë°‹ API í˜¸ì¶œ:"
          yujin_response=$(curl -s "https://api.github.com/repos/breadbirds/DailyAlgorithm/commits?author=breadbirds&path=yujin&since=2025-06-08T15:00:00Z&until=2025-06-09T14:59:59Z")
          echo "ì‘ë‹µ ê¸¸ì´: ${#yujin_response}"
          echo "ì‘ë‹µ ë‚´ìš©: $yujin_response"
          echo ""
          
          # 4. ë‹¤ë¥¸ path ì˜µì…˜ë“¤ í…ŒìŠ¤íŠ¸
          echo "4. ë‹¤ë¥¸ path ì˜µì…˜ë“¤ í…ŒìŠ¤íŠ¸:"
          
          echo "  â€¢ path=yujin/:"
          curl -s "https://api.github.com/repos/breadbirds/DailyAlgorithm/commits?author=breadbirds&path=yujin/&since=2025-06-08T15:00:00Z&until=2025-06-09T14:59:59Z" | jq '. | length'
          
          echo "  â€¢ path=yujin/test.txt:"
          curl -s "https://api.github.com/repos/breadbirds/DailyAlgorithm/commits?author=breadbirds&path=yujin/test.txt&since=2025-06-08T15:00:00Z&until=2025-06-09T14:59:59Z" | jq '. | length'
          
          # 5. ì‹¤ì œ ë ˆí¬ êµ¬ì¡°
          echo "5. ì‹¤ì œ ë ˆí¬ êµ¬ì¡°:"
          find . -name "*.txt" | head -10
          ls -la yujin/ 2>/dev/null || echo "yujin í´ë” ì—†ìŒ"
          
          echo ""
          echo "ğŸ”— ìˆ˜ë™ í™•ì¸ ë§í¬:"
          echo "https://github.com/breadbirds/DailyAlgorithm/commits?author=breadbirds&since=2025-06-09&until=2025-06-09"
