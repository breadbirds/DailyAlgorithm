## 문제
- `REST_INFO` 테이블에서 음식 종류별로 즐겨 찾기 수가 가장 많은 식단의 음식 종류를 조회
- 음식 종류, ID, 식당 이름, 즐겨찾기 수를 조회
- 음식 종류로 내림차순

## 코드
```mysql
SELECT R.FOOD_TYPE, R.REST_ID, R.REST_NAME, R.FAVORITES
FROM REST_INFO R
JOIN (
    SELECT FOOD_TYPE, MAX(FAVORITES) AS MAX_FAV
    FROM REST_INFO
    GROUP BY FOOD_TYPE
) M 
ON R.FOOD_TYPE = M.FOOD_TYPE AND R.FAVORITES = M.MAX_FAV
ORDER BY FOOD_TYPE DESC
```

## 리뷰
처음에 `group by` 이후 `having` 에서 `in`을 사용해서 값을 검색했는데 
`HAVING` 절에서는 `MAX(FAVORITES)` 같은 집계함수를 쓸 수 있지만,
그걸 서브쿼리 안에서 직접 비교하는 방식은 대부분의 SQL 엔진에서 지원되지 않는다고 한다.

```mysql
SELECT FOOD_TYPE, REST_ID, REST_NAME, FAVORITES
FROM REST_INFO
GROUP BY FOOD_TYPE
HAVING REST_ID IN (
  SELECT REST_ID FROM REST_INFO WHERE FAVORITES = MAX(FAVORITES)
)
ORDER BY FOOD_TYPE DESC;
```

## 링크
- https://school.programmers.co.kr/learn/courses/30/lessons/131123
